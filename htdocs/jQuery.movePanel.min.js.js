function getScrollTop() { return window.pageYOffset != undefined ? window.pageYOffset : document.documentElement.scrollTop }$.fn.moveDiv = function(i, a) { var g; var e; var d = false; var b = this; $(b).css({ position: "absolute", marginTop: "0px", zIndex: 600 }); $(i).mousedown(function(c) { d = true; var f = $(b).offset(); g = c.clientY - f.top; e = c.clientX - f.left }); $(document).mouseup(function() { d = false }); $(document).mousemove(function(c) { var f = c.clientX; var j = c.clientY; if (d) { $(b).css("left", (f - e) + "px"); $(b).css("top", (j-g) + "px") } }); $(a).click(function() { $(b).toggle() }); var h = Math.round((getViewportHeight() - $(b).outerHeight()) / 2); $(b).css("top", (h + getScrollTop()) + "px").css("left", ($(window).width() / 2 - $(window).scrollLeft() - $(b).outerWidth() / 2) + "px"); $(window).scroll(function() { $(b).css("top", (h + getScrollTop()) + "px").css("left", ($(window).width() / 2 - $(window).scrollLeft() - $(b).outerWidth() / 2) + "px") }); this.open = function() { $(b).show() }; this.close = function() { $(b).hide() }; return this;};